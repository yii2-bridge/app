module.exports=function(r,n){var a,o=require("child_process").spawn(r,n);o.stdout.on("data",function(r){var n=r.toString().trim();for(var s in a.arrays.debug)a.arrays.debug[s](n);if(a.arrays.on[n]){o.stdin.write(a.arrays.on[n]+""),delete a.arrays.on[n];var e=0;for(var s in a.arrays.on)e++;0==e&&o.stdin.end()}}).on("error",function(r){for(var n in a.arrays.error)a.arrays.error[n](r)}).on("close",function(r){for(var n in a.arrays.end)a.arrays.end[n](r)});return a={arrays:{end:[],on:{},debug:[],error:[]},error:function(r){return this.arrays.error.push(r),this},on:function(r,n){return this.arrays.on[r]=n,this},end:function(r){return this.arrays.end.push(r),this},debug:function(r){return this.arrays.debug.push(r),this}}};